<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Web Scraper</title>
    <link rel="stylesheet" href="static/style.css"> <!-- Link to your external CSS -->
</head>
<body>
    <div class="container">
        <h1>Website Scraper</h1>
        
        <form action="/scrape" method="POST" id="scrape-form">
            <label for="website_url">Enter Website URL:</label>
            <input type="text" id="website_url" name="website_url" required>
            <button type="submit">Scrape</button>
        </form>

        <div id="scraped-data" style="display:none;">
            <h2>Scraped Data</h2>
            <pre id="json-output"></pre>
            <button id="download-json">Download JSON</button>
        </div>
    </div>

    <script>
        // Handling form submission and displaying data in JSON format
        document.getElementById('scrape-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const websiteUrl = document.getElementById('website_url').value;

            fetch('/scrape', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `website_url=${websiteUrl}`,
            })
            .then(response => response.json())
            .then(data => {
                // Show scraped data as JSON
                document.getElementById('scraped-data').style.display = 'block';
                document.getElementById('json-output').textContent = JSON.stringify(data, null, 4);
                
                // Enable download button
                document.getElementById('download-json').addEventListener('click', function() {
                    const blob = new Blob([JSON.stringify(data, null, 4)], { type: 'application/json' });
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = 'scraped_data.json';
                    link.click();
                });
            })
            .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
